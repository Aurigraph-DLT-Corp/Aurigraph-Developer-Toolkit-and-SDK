# ================================================================================
# AUREX LAUNCHPAD™ COVERAGE CONFIGURATION
# Code coverage settings for comprehensive testing
# Ticket: LAUNCHPAD-401 - Testing & Validation Suite (21 story points)
# Created: August 7, 2025
# ================================================================================

[run]
# Source directories to measure coverage
source = .

# Files to include in coverage measurement
include = 
    *.py
    routers/*.py
    models/*.py
    services/*.py
    middleware/*.py
    security/*.py

# Files and directories to exclude from coverage
omit = 
    # Test files
    tests/*
    test_*.py
    *_test.py
    conftest.py
    
    # Virtual environments and dependencies
    venv/*
    .venv/*
    env/*
    .env/*
    */site-packages/*
    
    # Database migrations
    migrations/*
    alembic/*
    
    # Configuration and setup files
    setup.py
    config.py
    settings.py
    __init__.py
    
    # Third-party and generated files
    */migrations/*
    */venv/*
    */node_modules/*
    */.git/*
    */htmlcov/*
    */__pycache__/*
    .pytest_cache/*
    
    # Temporary and build files
    build/*
    dist/*
    *.egg-info/*
    .tox/*
    .coverage*
    coverage.xml
    
    # Specific exclusions
    main.py  # Application entry point (tested via integration)
    app.py   # Alternative entry point

# Coverage data file
data_file = .coverage

# Enable branch coverage (more thorough)
branch = True

# Parallel processing support
parallel = True

# Context tracking for per-test coverage
dynamic_contexts = test_function

[report]
# Reporting configuration
exclude_lines =
    # Standard exclusions
    pragma: no cover
    def __repr__
    def __str__
    
    # Defensive assertions
    raise AssertionError
    raise NotImplementedError
    
    # Non-runnable code
    if __name__ == .__main__.:
    if TYPE_CHECKING:
    
    # Abstract methods
    @abstractmethod
    @abc.abstractmethod
    
    # Debug code
    if DEBUG:
    if settings.DEBUG:
    
    # Development/testing code
    if TESTING:
    if os.environ.get
    
    # Error handling that's hard to test
    except ImportError:
    except KeyboardInterrupt:
    
    # Platform-specific code
    if sys.platform
    if platform.system
    
    # Type checking imports
    from typing import TYPE_CHECKING

# Show line numbers for missing coverage
show_missing = True

# Precision for coverage percentage
precision = 2

# Skip covered files in report
skip_covered = False

# Skip empty files
skip_empty = True

# Sort by coverage percentage (ascending)
sort = Cover

[html]
# HTML report configuration
directory = htmlcov
title = Aurex Launchpad Backend Coverage Report

# Show contexts in HTML report (which tests covered which lines)
show_contexts = True

# Skip files with no missing lines
skip_covered = False

# Skip empty files
skip_empty = True

[xml]
# XML report for CI/CD integration
output = coverage.xml

[json]
# JSON report configuration
output = coverage.json

# Show contexts in JSON report
show_contexts = True

[paths]
# Path mapping for different environments
source =
    .
    /app
    /code
    /workspace
    C:\workspace\aurex-launchpad
    /Users/*/aurex-launchpad
    /home/*/aurex-launchpad

# Coverage thresholds for different components
# (These are informational - actual enforcement is in pytest.ini)

# Overall project target: ≥85%
# Critical modules target: ≥90%
#   - routers/ (API endpoints)
#   - models/ (Database models)
#   - security/ (Security functions)
# 
# Standard modules target: ≥80%
#   - services/ (Business logic)
#   - middleware/ (Request processing)
# 
# Utility modules target: ≥75%
#   - utils/ (Helper functions)

# Files that must have 100% coverage
# (Critical security and data integrity functions)
required_100_percent = 
    security/password_utils.py
    models/base_models.py

[coverage:paths]
# Source path normalization for different deployment environments
source =
    aurex-launchpad/
    */aurex-launchpad/
    /app/
    /code/
    
[coverage:run]
# Additional run configuration
timid = False
cover_pylib = False

# Plugins for enhanced coverage measurement
plugins = 
    coverage_conditional_plugin

# Concurrency support for async tests
concurrency = 
    thread
    multiprocessing

# Debug options (set to true for troubleshooting)
debug = 
    # trace
    # config  
    # callers
    # pid
    # dataop
    # dataio
    # plugin
    # sys