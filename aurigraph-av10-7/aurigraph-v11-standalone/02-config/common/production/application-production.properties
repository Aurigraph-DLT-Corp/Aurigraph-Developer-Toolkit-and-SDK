# ===================================================================
# AURIGRAPH V11 - PRODUCTION CONFIGURATION TEMPLATE
# ===================================================================
# This file contains TEMPLATE values for production deployment
# IMPORTANT: Replace all placeholder values with actual credentials
# DO NOT commit this file with real secrets to version control
# ===================================================================

# ===================================================================
# APPLICATION IDENTITY
# ===================================================================
quarkus.application.name=aurigraph-v11-production
quarkus.application.version=${VERSION:12.0.0}

# ===================================================================
# SERVER CONFIGURATION
# ===================================================================
quarkus.http.port=${HTTP_PORT:9003}
quarkus.http.host=${HTTP_HOST:0.0.0.0}
quarkus.http.http2=true

# Production: Behind reverse proxy (NGINX handles TLS)
quarkus.http.insecure-requests=enabled
quarkus.http.proxy.proxy-address-forwarding=true
quarkus.http.proxy.allow-forwarded=true
quarkus.http.proxy.allow-x-forwarded=true

# Connection Limits (Production Scale)
quarkus.http.limits.max-connections=${MAX_CONNECTIONS:10000}
quarkus.http.limits.max-concurrent-streams=100000
quarkus.http.limits.max-frame-size=16777215
quarkus.http.limits.max-header-size=65536

# ===================================================================
# SECURITY CONFIGURATION
# ===================================================================

# CORS - PRODUCTION DOMAINS ONLY
quarkus.http.cors=true
quarkus.http.cors.origins=${CORS_ORIGINS:https://dlt.aurigraph.io}
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=Content-Type,Authorization,X-Requested-With,Accept,Origin
quarkus.http.cors.access-control-allow-credentials=false

# Security Headers
quarkus.http.filter.security.header.X-Frame-Options=DENY
quarkus.http.filter.security.header.X-Content-Type-Options=nosniff
quarkus.http.filter.security.header.X-XSS-Protection=1; mode=block
quarkus.http.filter.security.header.Strict-Transport-Security=max-age=31536000; includeSubDomains

# JWT Configuration (EXTERNALIZED)
mp.jwt.verify.publickey.location=${JWT_PUBLIC_KEY_URL:https://iam.aurigraph.io/realms/aurigraph/protocol/openid-connect/certs}
mp.jwt.verify.issuer=${JWT_ISSUER:https://iam.aurigraph.io/realms/aurigraph}

# ===================================================================
# DATABASE CONFIGURATION (EXTERNALIZED)
# ===================================================================
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${DB_USERNAME:aurigraph}
quarkus.datasource.password=${DB_PASSWORD:CHANGE_ME}
quarkus.datasource.jdbc.url=${DB_URL:jdbc:postgresql://postgres:5432/aurigraph_production}

# Connection Pool (Production Tuned)
quarkus.datasource.jdbc.max-size=${DB_POOL_MAX:100}
quarkus.datasource.jdbc.min-size=${DB_POOL_MIN:10}
quarkus.datasource.jdbc.acquisition-timeout=10
quarkus.datasource.jdbc.validation-query=SELECT 1

# Hibernate (DO NOT auto-generate schema in production)
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.sql-load-script=no-file

# Flyway Migration
quarkus.flyway.migrate-at-start=true
quarkus.flyway.baseline-on-migrate=false
quarkus.flyway.clean-disabled=true

# ===================================================================
# REDIS CACHE (EXTERNALIZED)
# ===================================================================
quarkus.redis.hosts=${REDIS_URL:redis://redis:6379}
quarkus.redis.password=${REDIS_PASSWORD:CHANGE_ME}
quarkus.redis.timeout=10s
quarkus.redis.max-pool-size=64

# ===================================================================
# CONSENSUS CONFIGURATION (EXTERNALIZED)
# ===================================================================
consensus.node.id=${CONSENSUS_NODE_ID:prod-node-1}
consensus.validators=${CONSENSUS_VALIDATORS:prod-node-1,prod-node-2,prod-node-3,prod-node-4,prod-node-5}
consensus.election.timeout.ms=${CONSENSUS_ELECTION_TIMEOUT:250}
consensus.heartbeat.interval.ms=${CONSENSUS_HEARTBEAT_INTERVAL:25}
consensus.batch.size=${CONSENSUS_BATCH_SIZE:200000}
consensus.pipeline.depth=${CONSENSUS_PIPELINE_DEPTH:100}
consensus.parallel.threads=${CONSENSUS_PARALLEL_THREADS:1024}
consensus.target.tps=${CONSENSUS_TARGET_TPS:5000000}

# ===================================================================
# ORACLE VERIFICATION (EXTERNALIZED)
# ===================================================================
oracle.verification.min.consensus=${ORACLE_MIN_CONSENSUS:0.67}
oracle.verification.price.tolerance=${ORACLE_PRICE_TOLERANCE:0.05}
oracle.verification.min.required=${ORACLE_MIN_REQUIRED:3}
oracle.verification.timeout.seconds=${ORACLE_TIMEOUT:7}

# ===================================================================
# WEBSOCKET CONFIGURATION
# ===================================================================
websocket.queue.max.size=${WEBSOCKET_QUEUE_SIZE:1000}
websocket.processing.timeout.ms=${WEBSOCKET_TIMEOUT:5000}
websocket.max.connections.per.endpoint=${WEBSOCKET_MAX_CONNECTIONS:10000}
websocket.compression.enabled=${WEBSOCKET_COMPRESSION:true}
websocket.heartbeat.interval.seconds=${WEBSOCKET_HEARTBEAT:30}
websocket.target.latency.ms=${WEBSOCKET_TARGET_LATENCY:100}

# ===================================================================
# AI OPTIMIZATION
# ===================================================================
ai.optimization.enabled=${AI_OPTIMIZATION_ENABLED:true}
ai.optimization.learning.rate=${AI_LEARNING_RATE:0.00005}
ai.optimization.target.tps=${AI_TARGET_TPS:10000000}
ai.optimization.min.confidence=${AI_MIN_CONFIDENCE:0.90}

# ===================================================================
# MONITORING & OBSERVABILITY
# ===================================================================

# Logging (JSON format for production)
quarkus.log.level=INFO
quarkus.log.category."io.aurigraph".level=INFO
quarkus.log.console.json=true
quarkus.log.console.enable=true

# File Logging (Optional - recommend using centralized logging)
quarkus.log.file.enable=${LOG_FILE_ENABLED:false}
quarkus.log.file.path=${LOG_FILE_PATH:/var/log/aurigraph/application.log}

# Metrics (Prometheus)
quarkus.micrometer.enabled=true
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/q/metrics

# Health Checks
quarkus.smallrye-health.root-path=/q/health
oracle.health.check.enabled=${ORACLE_HEALTH_CHECK:true}
websocket.health.check.enabled=${WEBSOCKET_HEALTH_CHECK:true}

# Distributed Tracing (Optional)
quarkus.opentelemetry.enabled=${TRACING_ENABLED:false}
quarkus.opentelemetry.tracer.exporter.otlp.endpoint=${JAEGER_ENDPOINT:http://jaeger:14268/api/traces}

# ===================================================================
# PERFORMANCE TUNING
# ===================================================================

# Virtual Threads (Java 21)
quarkus.virtual-threads.enabled=true
quarkus.thread-pool.core-threads=1024
quarkus.thread-pool.max-threads=4096
quarkus.thread-pool.queue-size=500000

# Native Compilation Settings
quarkus.native.container-build=true
quarkus.native.container-runtime=docker
quarkus.native.builder-image=quay.io/quarkus/ubi-quarkus-mandrel-builder-image:jdk-21

# ===================================================================
# QUANTUM CRYPTOGRAPHY (HSM)
# ===================================================================
aurigraph.crypto.hsm.enabled=${HSM_ENABLED:true}
aurigraph.crypto.hsm.provider=PKCS11
aurigraph.crypto.hsm.library.path=${HSM_LIBRARY_PATH:/usr/lib/softhsm/libsofthsm2.so}
aurigraph.crypto.hsm.slot=${HSM_SLOT:0}
aurigraph.crypto.hsm.pin=${HSM_PIN:CHANGE_ME}

# Key Rotation
aurigraph.crypto.key.rotation.enabled=true
aurigraph.crypto.key.rotation.interval.days=${KEY_ROTATION_DAYS:90}

# ===================================================================
# LEVELDB STORAGE (EXTERNALIZED)
# ===================================================================
leveldb.data.path=${LEVELDB_PATH:/var/lib/aurigraph/leveldb/${consensus.node.id}}
leveldb.cache.size.mb=${LEVELDB_CACHE:512}
leveldb.write.buffer.mb=${LEVELDB_BUFFER:128}

# LevelDB Encryption
leveldb.encryption.enabled=${LEVELDB_ENCRYPTION:true}
leveldb.encryption.key.path=${LEVELDB_KEY_PATH:/var/lib/aurigraph/keys/leveldb-master.key}
leveldb.encryption.master.password=${LEVELDB_PASSWORD:CHANGE_ME}

# ===================================================================
# RATE LIMITING & SECURITY
# ===================================================================
rate.limiting.enabled=${RATE_LIMITING_ENABLED:true}
rate.limiting.requests.per.minute=${RATE_LIMIT_RPM:1000}
rate.limiting.burst.size=${RATE_LIMIT_BURST:100}

# DDoS Protection
ddos.protection.enabled=${DDOS_PROTECTION:true}
ddos.max.connections.per.ip=${DDOS_MAX_CONN_IP:100}

# ===================================================================
# EXTERNAL API INTEGRATIONS (EXTERNALIZED)
# ===================================================================

# Alpaca Markets (HMS Integration)
hms.alpaca.api.key=${ALPACA_API_KEY:CHANGE_ME}
hms.alpaca.secret.key=${ALPACA_SECRET_KEY:CHANGE_ME}
hms.alpaca.base.url=${ALPACA_BASE_URL:https://api.alpaca.markets}

# Bridge Configuration
bridge.ethereum.rpc.url=${BRIDGE_ETH_RPC:https://eth-mainnet.g.alchemy.com/v2/YOUR_KEY}
bridge.polygon.rpc.url=${BRIDGE_POLYGON_RPC:https://polygon-rpc.com/}
bridge.solana.rpc.url=${BRIDGE_SOLANA_RPC:https://api.mainnet-beta.solana.com}

# ===================================================================
# BACKUP & DISASTER RECOVERY
# ===================================================================
backup.enabled=${BACKUP_ENABLED:true}
backup.retention.days=${BACKUP_RETENTION:30}
backup.schedule.cron=${BACKUP_SCHEDULE:0 2 * * *}
backup.destination=${BACKUP_DESTINATION:s3://aurigraph-backups}

# ===================================================================
# NOTES
# ===================================================================
# 1. All CHANGE_ME values MUST be replaced with actual credentials
# 2. Use environment variables or secrets management (Vault, AWS Secrets Manager)
# 3. Never commit real credentials to version control
# 4. Rotate credentials regularly (90-day policy)
# 5. Monitor all security logs and alerts
# 6. Review and update this configuration quarterly
# ===================================================================
