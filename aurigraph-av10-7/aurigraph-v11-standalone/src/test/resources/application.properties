# =============================================================================
# AURIGRAPH V12 TEST CONFIGURATION
# =============================================================================
# AV11-541: Re-enabled and fixed test suite
# December 2025

# =============================================================================
# QUARKUS CORE
# =============================================================================

# Disable gRPC server for tests to avoid dependency issues
quarkus.grpc.server.enabled=false

# HTTP port for tests (random available port)
quarkus.http.test-port=0

# =============================================================================
# DATABASE
# =============================================================================

# Use in-memory H2 database for tests
quarkus.datasource.db-kind=h2
quarkus.datasource.jdbc.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;MODE=PostgreSQL
quarkus.datasource.username=sa
quarkus.datasource.password=
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.log.sql=false

# Disable Flyway for tests (using Hibernate auto-generation)
quarkus.flyway.migrate-at-start=false
quarkus.flyway.clean-at-start=false

# =============================================================================
# LOGGING
# =============================================================================

# Reduce logging noise in tests
quarkus.log.level=WARN
quarkus.log.category."io.aurigraph".level=INFO
quarkus.log.category."org.hibernate".level=WARN
quarkus.log.category."io.quarkus".level=WARN

# =============================================================================
# SECURITY
# =============================================================================

# Disable authentication for tests (use @TestSecurity for specific tests)
quarkus.security.auth.enabled-in-dev-mode=false

# JWT test configuration - disabled for unit tests
# Uncomment and provide valid key for integration tests requiring JWT
# mp.jwt.verify.publickey.location=classpath:test-public-key.pem
# mp.jwt.verify.issuer=https://test.aurigraph.io
smallrye.jwt.verify.key.location.disabled=true

# =============================================================================
# ML/AI CONFIGURATION
# =============================================================================

# Test-specific ML configuration
ml.scoring.enabled=true
ml.scoring.batch.size=100
ml.scoring.learning.interval=1000
ml.model.path=test-models/

# =============================================================================
# QUANTUM CRYPTOGRAPHY
# =============================================================================

# Enable CURBy quantum service for testing (with fallback)
curby.quantum.enabled=true
curby.quantum.fallback=true
curby.quantum.test-mode=true

# =============================================================================
# FILE ATTACHMENTS
# =============================================================================

# Test file storage path
aurigraph.attachments.path=target/test-attachments
aurigraph.attachments.max-size-mb=10

# Disable MinIO for tests (use local storage)
aurigraph.minio.enabled=false

# =============================================================================
# RATE LIMITING
# =============================================================================

# Disable rate limiting for tests
aurigraph.governance.rate-limit.enabled=false

# =============================================================================
# JIRA INTEGRATION
# =============================================================================

# Test JIRA configuration (mock)
jira.base.url=https://test.atlassian.net
jira.email=test@example.com
jira.api.token=test-token

# =============================================================================
# TEST TIMEOUTS
# =============================================================================

# Increase timeout for integration tests
quarkus.test.timeout=300s

# =============================================================================
# TESTCONTAINERS (Disabled by default, enable for integration tests)
# =============================================================================

# quarkus.devservices.enabled=false
