# Aurigraph V11 Optimized Native Image Configuration
# Target: <800ms startup, <85MB binary, <200MB memory footprint
# Optimized for high-performance blockchain operations with 2M+ TPS

# Core Build Arguments - Production Ready
Args = --initialize-at-build-time=org.slf4j.LoggerFactory,org.slf4j.impl.StaticLoggerBinder \
       --initialize-at-build-time=io.quarkus,jakarta.enterprise \
       --initialize-at-build-time=io.smallrye.mutiny \
       \
       --initialize-at-run-time=io.netty.channel.unix.Socket \
       --initialize-at-run-time=io.netty.channel.unix.Errors \
       --initialize-at-run-time=io.netty.channel.unix.FileDescriptor \
       --initialize-at-run-time=io.netty.channel.unix.IovArray \
       --initialize-at-run-time=io.netty.channel.unix.Limits \
       --initialize-at-run-time=io.netty.handler.codec.http2 \
       --initialize-at-run-time=io.netty.util.internal.logging \
       \
       --initialize-at-run-time=io.grpc.netty.shaded.io.netty \
       --initialize-at-run-time=io.grpc.internal.DnsNameResolver \
       --initialize-at-run-time=io.grpc.internal.ManagedChannelServiceConfig \
       \
       --initialize-at-run-time=io.aurigraph.v11.consensus.HyperRAFTConsensusService \
       --initialize-at-run-time=io.aurigraph.v11.ai.AIOptimizationService \
       --initialize-at-run-time=io.aurigraph.v11.crypto.QuantumCryptoService \
       --initialize-at-run-time=io.aurigraph.bridge.CrossChainBridgeService \
       --initialize-at-run-time=io.aurigraph.v11.hms.HMSIntegrationService \
       \
       --initialize-at-run-time=org.bouncycastle \
       --initialize-at-run-time=java.security.SecureRandom \
       --initialize-at-run-time=sun.security.provider.NativePRNG \
       \
       --initialize-at-run-time=org.deeplearning4j \
       --initialize-at-run-time=org.nd4j \
       --initialize-at-run-time=com.github.haifengl.smile \
       --initialize-at-run-time=weka.core \
       \
       --initialize-at-run-time=java.util.concurrent.ForkJoinPool \
       --initialize-at-run-time=java.util.concurrent.ThreadPoolExecutor \
       --initialize-at-run-time=java.lang.VirtualThread \
       \
       --enable-https \
       --enable-http \
       --enable-url-protocols=http,https,grpc,tcp \
       --allow-incomplete-classpath \
       --report-unsupported-elements-at-runtime \
       --no-fallback \
       --install-exit-handlers \
       --enable-monitoring=heapdump,jfr \
       \
       -H:+UnlockExperimentalVMOptions \
       -H:+UseContainerSupport \
       -H:+UseCompressedOOPS \
       -H:+StaticExecutableWithDynamicLibC \
       -H:-SpawnIsolates \
       \
       -H:+UseG1GC \
       -H:MaxGCPauseMillis=2 \
       -H:G1HeapRegionSize=32m \
       -H:+UseStringDeduplication \
       -H:+ParallelRefProcEnabled \
       \
       -H:MaxHeapSize=200m \
       -H:MinHeapSize=32m \
       -H:NewRatio=1 \
       -H:SurvivorRatio=8 \
       \
       -H:+OptimizeStringConcat \
       -H:+UseCompressedClassPointers \
       -H:+RemoveUnusedSymbols \
       -H:+RemoveSaturatedTypeFlows \
       -H:+EliminateAllocations \
       -H:+OptimizeSpinLocks \
       -H:+InlineAccessors \
       -H:+InlineMonomorphicCalls \
       -H:+OptimizeTrivialMethods \
       -H:+OptimizeMemoryAccess \
       -H:+EagerlyInitializeNativeImageState \
       -H:+ReduceImplicitExceptions \
       \
       -H:-UseServiceLoaderFeature \
       -H:+UsePerfData \
       -H:+EnableJNI \
       -H:+AllowVMInspection \
       \
       -H:ReflectionConfigurationFiles=META-INF/native-image/reflect-config.json \
       -H:ResourceConfigurationFiles=META-INF/native-image/resource-config.json \
       -H:DynamicProxyConfigurationFiles=META-INF/native-image/proxy-config.json \
       -H:SerializationConfigurationFiles=META-INF/native-image/serialization-config.json \
       -H:JNIConfigurationFiles=META-INF/native-image/jni-config.json \
       \
       -H:IncludeResources=.*\\.proto$,.*\\.json$,.*\\.properties$,.*\\.yml$,.*\\.yaml$,META-INF/.*,certificates/.*,keys/.* \
       -H:IncludeResourceBundles=io.aurigraph.v11.Messages \
       \
       -H:Log=registerResource:3 \
       -H:EnableVMAssertions=false \
       -H:+ReportExceptionStackTraces \
       -H:+ReportUnsupportedElementsAtRuntime \
       -H:+TraceClassInitialization \
       -H:MaxJavaStackTraceDepth=20 \
       -H:MaxRuntimeCompileMethods=8000 \
       \
       -H:DeadlockWatchdogInterval=30 \
       -H:DeadlockWatchdogExitOnTimeout=true \
       \
       -H:NativeLinkerOption=-static-libgcc \
       -H:NativeLinkerOption=-static-libstdc++ \
       -H:+DumpTargetInfo \
       --verbose