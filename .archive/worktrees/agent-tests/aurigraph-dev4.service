[Unit]
Description=Aurigraph DLT Dev4 Demo Service
Documentation=https://dlt.aurigraph.io/api/docs
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/home/ubuntu/aurigraph-dlt
ExecStart=/usr/bin/node /home/ubuntu/aurigraph-dlt/aurigraph-demo-dev4.js
ExecStop=/bin/kill -TERM $MAINPID
Restart=always
RestartSec=10
StandardOutput=append:/var/log/aurigraph/demo.log
StandardError=append:/var/log/aurigraph/error.log

# Environment variables
Environment="NODE_ENV=production"
Environment="DOMAIN=dlt.aurigraph.io"
Environment="PORT=4004"
Environment="WS_PORT=4005"
Environment="CORS_ORIGIN=https://dlt.aurigraph.io"

# Process limits
LimitNOFILE=65536
LimitNPROC=4096

# Memory limits
MemoryLimit=2G
MemorySwapMax=0

# CPU limits
CPUQuota=200%

# Security hardening
PrivateTmp=true
NoNewPrivileges=true
ProtectSystem=strict
ProtectHome=true
ReadWritePaths=/var/log/aurigraph

[Install]
WantedBy=multi-user.target