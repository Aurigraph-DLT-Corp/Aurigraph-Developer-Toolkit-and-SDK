# Elasticsearch Configuration for Aurigraph V11
# Single-node development/production configuration

cluster.name: aurigraph-elk
node.name: aurigraph-es-node1

# Network settings
network.host: 0.0.0.0
http.port: 9200
transport.port: 9300

# Discovery settings (single-node)
discovery.type: single-node

# Security settings (disabled for simplicity)
xpack.security.enabled: false
xpack.security.http.ssl.enabled: false
xpack.security.transport.ssl.enabled: false

# Monitoring
xpack.monitoring.enabled: true
xpack.monitoring.collection.enabled: true

# Index settings
action.auto_create_index: true
action.destructive_requires_name: true

# Performance settings
bootstrap.memory_lock: true
indices.memory.index_buffer_size: 30%
indices.queries.cache.size: 10%

# Thread pools
thread_pool.search.size: 30
thread_pool.search.queue_size: 1000
thread_pool.write.size: 30
thread_pool.write.queue_size: 1000

# Index lifecycle management
indices.lifecycle.poll_interval: 10m

# Snapshots directory
path.repo: ["/usr/share/elasticsearch/backups"]

# HTTP settings
http.max_content_length: 100mb
http.compression: true
http.cors.enabled: true
http.cors.allow-origin: "*"

# Logging
logger.level: INFO
logger.org.elasticsearch.index.search.slowlog.query: INFO
logger.org.elasticsearch.index.indexing.slowlog.index: INFO

# Slow log thresholds
index.search.slowlog.threshold.query.warn: 10s
index.search.slowlog.threshold.query.info: 5s
index.search.slowlog.threshold.query.debug: 2s
index.search.slowlog.threshold.fetch.warn: 1s
index.search.slowlog.threshold.fetch.info: 800ms
index.search.slowlog.threshold.fetch.debug: 500ms

index.indexing.slowlog.threshold.index.warn: 10s
index.indexing.slowlog.threshold.index.info: 5s
index.indexing.slowlog.threshold.index.debug: 2s

# Index templates
index.number_of_shards: 1
index.number_of_replicas: 0
index.refresh_interval: 5s
