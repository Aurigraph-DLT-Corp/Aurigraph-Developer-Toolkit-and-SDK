# Aurigraph V11 Production Alerting Rules\n# Comprehensive alerting for blockchain platform monitoring\n\ngroups:\n  # ==========================================================================\n  # Performance and TPS Alerts\n  # ==========================================================================\n  \n  - name: aurigraph-v11-performance\n    interval: 15s\n    rules:\n    \n    # Critical TPS alerts\n    - alert: AurigraphCriticalLowTPS\n      expr: |\n        (\n          rate(aurigraph_transactions_total[5m]) < 1000000\n          or\n          absent(rate(aurigraph_transactions_total[5m]))\n        )\n      for: 3m\n      labels:\n        severity: critical\n        service: aurigraph-v11\n        component: consensus\n        tier: production\n        priority: p1\n      annotations:\n        summary: \"Aurigraph V11 TPS critically low\"\n        description: |\n          Production TPS is {{ $value | humanize }} on {{ $labels.pod }}, \n          which is below the critical threshold of 1M TPS.\n          This indicates a serious performance issue requiring immediate attention.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/critical-low-tps\"\n        dashboard_url: \"https://grafana.aurigraph.io/d/aurigraph-performance\"\n        escalation_policy: \"immediate-page\"\n    \n    - alert: AurigraphSLATpsViolation\n      expr: |\n        (\n          rate(aurigraph_transactions_total[10m]) < 1500000\n        )\n      for: 10m\n      labels:\n        severity: critical\n        service: aurigraph-v11\n        component: consensus\n        tier: production\n        priority: p1\n        alert_type: sla_violation\n      annotations:\n        summary: \"Aurigraph V11 SLA TPS violation\"\n        description: |\n          Production TPS has been {{ $value | humanize }} for over 10 minutes,\n          violating the SLA requirement of 1.5M+ TPS sustained performance.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/sla-violation\"\n        dashboard_url: \"https://grafana.aurigraph.io/d/aurigraph-sla\"\n        escalation_policy: \"sla-violation\"\n    \n    - alert: AurigraphHighLatency\n      expr: |\n        (\n          histogram_quantile(0.95, rate(aurigraph_consensus_duration_seconds_bucket[5m])) > 0.1\n          or\n          histogram_quantile(0.99, rate(aurigraph_transaction_duration_seconds_bucket[5m])) > 0.2\n        )\n      for: 5m\n      labels:\n        severity: warning\n        service: aurigraph-v11\n        component: consensus\n        tier: production\n        priority: p2\n      annotations:\n        summary: \"Aurigraph V11 high latency detected\"\n        description: |\n          High latency detected on {{ $labels.pod }}:\n          - P95 consensus latency: {{ printf \"%.3f\" $value }}s\n          - Target: < 0.1s\n          This may indicate network issues, resource constraints, or consensus problems.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/high-latency\"\n        dashboard_url: \"https://grafana.aurigraph.io/d/aurigraph-latency\"\n    \n    - alert: AurigraphTpsDropping\n      expr: |\n        (\n          (rate(aurigraph_transactions_total[5m]) / rate(aurigraph_transactions_total[15m] offset 10m)) < 0.7\n        )\n      for: 3m\n      labels:\n        severity: warning\n        service: aurigraph-v11\n        component: performance\n        tier: production\n        priority: p2\n      annotations:\n        summary: \"Aurigraph V11 TPS dropping significantly\"\n        description: |\n          TPS on {{ $labels.pod }} has dropped by {{ printf \"%.1f\" (100 - $value * 100) }}% \n          compared to the previous 15-minute average.\n          Current: {{ with query \"rate(aurigraph_transactions_total[5m])\" }}{{ . | first | value | humanize }}{{ end }} TPS\n        runbook_url: \"https://docs.aurigraph.io/runbooks/tps-dropping\"\n    \n    - alert: AurigraphTpsSpike\n      expr: |\n        (\n          rate(aurigraph_transactions_total[2m]) > 3500000\n        )\n      for: 2m\n      labels:\n        severity: warning\n        service: aurigraph-v11\n        component: performance\n        tier: production\n        priority: p3\n        alert_type: capacity_planning\n      annotations:\n        summary: \"Aurigraph V11 TPS spike detected\"\n        description: |\n          TPS spike detected on {{ $labels.pod }}: {{ $value | humanize }} TPS\n          This exceeds normal operating range and may require scaling.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/tps-spike\"\n        dashboard_url: \"https://grafana.aurigraph.io/d/aurigraph-capacity\"\n  \n  # ==========================================================================\n  # Consensus and Blockchain Alerts\n  # ==========================================================================\n  \n  - name: aurigraph-v11-consensus\n    interval: 10s\n    rules:\n    \n    - alert: AurigraphConsensusFailure\n      expr: |\n        (\n          increase(aurigraph_consensus_failures_total[10m]) > 5\n          or\n          increase(aurigraph_consensus_leader_elections_total[10m]) > 10\n        )\n      for: 2m\n      labels:\n        severity: critical\n        service: aurigraph-v11\n        component: consensus\n        tier: production\n        priority: p1\n      annotations:\n        summary: \"Aurigraph V11 consensus instability\"\n        description: |\n          Consensus instability detected on {{ $labels.pod }}:\n          - Failures in 10m: {{ with query \"increase(aurigraph_consensus_failures_total[10m])\" }}{{ . | first | value }}{{ end }}\n          - Leader elections in 10m: {{ with query \"increase(aurigraph_consensus_leader_elections_total[10m])\" }}{{ . | first | value }}{{ end }}\n          This indicates serious consensus issues that may affect transaction processing.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/consensus-failure\"\n        escalation_policy: \"consensus-emergency\"\n    \n    - alert: AurigraphConsensusNodePartition\n      expr: |\n        (\n          aurigraph_consensus_cluster_size - aurigraph_consensus_active_nodes > 1\n        )\n      for: 1m\n      labels:\n        severity: critical\n        service: aurigraph-v11\n        component: consensus\n        tier: production\n        priority: p1\n        alert_type: network_partition\n      annotations:\n        summary: \"Aurigraph V11 consensus node partition\"\n        description: |\n          Network partition detected in consensus cluster:\n          - Expected nodes: {{ with query \"aurigraph_consensus_cluster_size\" }}{{ . | first | value }}{{ end }}\n          - Active nodes: {{ with query \"aurigraph_consensus_active_nodes\" }}{{ . | first | value }}{{ end }}\n          This may prevent consensus and halt transaction processing.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/network-partition\"\n    \n    - alert: AurigraphConsensusLogLag\n      expr: |\n        (\n          aurigraph_consensus_log_lag > 10000\n        )\n      for: 5m\n      labels:\n        severity: warning\n        service: aurigraph-v11\n        component: consensus\n        tier: production\n        priority: p2\n      annotations:\n        summary: \"Aurigraph V11 consensus log lag\"\n        description: |\n          Consensus log lag is {{ $value }} entries on {{ $labels.pod }}.\n          This may indicate slow consensus replication or node performance issues.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/consensus-lag\"\n    \n    - alert: AurigraphBlockProductionSlow\n      expr: |\n        (\n          rate(aurigraph_blocks_produced_total[5m]) < 1000\n        )\n      for: 3m\n      labels:\n        severity: warning\n        service: aurigraph-v11\n        component: consensus\n        tier: production\n        priority: p2\n      annotations:\n        summary: \"Aurigraph V11 slow block production\"\n        description: |\n          Block production rate is {{ $value | humanize }} blocks/sec on {{ $labels.pod }}.\n          Expected rate is > 1000 blocks/sec for optimal performance.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/slow-block-production\"\n  \n  # ==========================================================================\n  # AI Optimization and ML Alerts\n  # ==========================================================================\n  \n  - name: aurigraph-v11-ai\n    interval: 30s\n    rules:\n    \n    - alert: AurigraphAIOptimizationDown\n      expr: |\n        (\n          aurigraph_ai_optimization_enabled == 0\n          or\n          absent(aurigraph_ai_optimization_enabled)\n        )\n      for: 5m\n      labels:\n        severity: warning\n        service: aurigraph-v11\n        component: ai-optimization\n        tier: production\n        priority: p2\n      annotations:\n        summary: \"Aurigraph V11 AI optimization disabled\"\n        description: |\n          AI optimization is disabled on {{ $labels.pod }}.\n          This may result in suboptimal performance and reduced TPS.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/ai-optimization-down\"\n    \n    - alert: AurigraphAIOptimizationErrors\n      expr: |\n        (\n          increase(aurigraph_ai_optimization_errors_total[15m]) > 20\n        )\n      for: 5m\n      labels:\n        severity: warning\n        service: aurigraph-v11\n        component: ai-optimization\n        tier: production\n        priority: p2\n      annotations:\n        summary: \"Aurigraph V11 AI optimization errors\"\n        description: |\n          High error rate in AI optimization: {{ $value }} errors in 15 minutes on {{ $labels.pod }}.\n          This may indicate ML model issues or resource constraints.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/ai-optimization-errors\"\n    \n    - alert: AurigraphAIModelAccuracyLow\n      expr: |\n        (\n          aurigraph_ai_model_accuracy < 0.85\n        )\n      for: 10m\n      labels:\n        severity: warning\n        service: aurigraph-v11\n        component: ai-optimization\n        tier: production\n        priority: p2\n      annotations:\n        summary: \"Aurigraph V11 AI model accuracy degraded\"\n        description: |\n          AI model accuracy has degraded to {{ printf \"%.2f\" $value }} ({{ printf \"%.1f\" ($value * 100) }}%) on {{ $labels.pod }}.\n          Target accuracy: > 85%. Consider model retraining.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/ai-model-accuracy\"\n    \n    - alert: AurigraphPredictiveRoutingFailure\n      expr: |\n        (\n          rate(aurigraph_predictive_routing_failures_total[10m]) > 0.1\n        )\n      for: 5m\n      labels:\n        severity: warning\n        service: aurigraph-v11\n        component: predictive-routing\n        tier: production\n        priority: p2\n      annotations:\n        summary: \"Aurigraph V11 predictive routing failures\"\n        description: |\n          Predictive routing failure rate: {{ printf \"%.3f\" $value }}/sec on {{ $labels.pod }}.\n          This may impact load balancing efficiency.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/predictive-routing-failure\"\n  \n  # ==========================================================================\n  # Quantum Cryptography Alerts\n  # ==========================================================================\n  \n  - name: aurigraph-v11-quantum-crypto\n    interval: 30s\n    rules:\n    \n    - alert: AurigraphQuantumCryptoDisabled\n      expr: |\n        (\n          aurigraph_quantum_crypto_enabled == 0\n          or\n          absent(aurigraph_quantum_crypto_enabled)\n        )\n      for: 2m\n      labels:\n        severity: critical\n        service: aurigraph-v11\n        component: quantum-crypto\n        tier: production\n        priority: p1\n        alert_type: security\n      annotations:\n        summary: \"Aurigraph V11 quantum cryptography disabled\"\n        description: |\n          Quantum cryptography is disabled on {{ $labels.pod }}.\n          This creates a critical security vulnerability in production.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/quantum-crypto-disabled\"\n        escalation_policy: \"security-incident\"\n    \n    - alert: AurigraphQuantumCryptoErrors\n      expr: |\n        (\n          increase(aurigraph_quantum_crypto_errors_total[10m]) > 5\n        )\n      for: 3m\n      labels:\n        severity: warning\n        service: aurigraph-v11\n        component: quantum-crypto\n        tier: production\n        priority: p2\n        alert_type: security\n      annotations:\n        summary: \"Aurigraph V11 quantum cryptography errors\"\n        description: |\n          Quantum cryptography errors detected: {{ $value }} in 10 minutes on {{ $labels.pod }}.\n          This may indicate cryptographic hardware or algorithm issues.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/quantum-crypto-errors\"\n    \n    - alert: AurigraphDilithiumSignatureLatency\n      expr: |\n        (\n          histogram_quantile(0.95, rate(aurigraph_dilithium_signature_duration_seconds_bucket[5m])) > 0.01\n        )\n      for: 5m\n      labels:\n        severity: warning\n        service: aurigraph-v11\n        component: quantum-crypto\n        tier: production\n        priority: p2\n      annotations:\n        summary: \"Aurigraph V11 Dilithium signature high latency\"\n        description: |\n          Dilithium signature P95 latency: {{ printf \"%.3f\" $value }}s on {{ $labels.pod }}.\n          Target: < 0.01s. This may impact transaction signing performance.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/dilithium-latency\"\n  \n  # ==========================================================================\n  # Infrastructure and Resource Alerts\n  # ==========================================================================\n  \n  - name: aurigraph-v11-infrastructure\n    interval: 30s\n    rules:\n    \n    - alert: AurigraphHighMemoryUsage\n      expr: |\n        (\n          container_memory_usage_bytes{container=\"aurigraph-v11-production\"} / \n          container_spec_memory_limit_bytes{container=\"aurigraph-v11-production\"} > 0.90\n        )\n      for: 5m\n      labels:\n        severity: warning\n        service: aurigraph-v11\n        component: infrastructure\n        tier: production\n        priority: p2\n      annotations:\n        summary: \"Aurigraph V11 high memory usage\"\n        description: |\n          Memory usage is {{ printf \"%.1f\" ($value * 100) }}% of limit on {{ $labels.pod }}.\n          This may lead to OOM kills and service disruption.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/high-memory-usage\"\n    \n    - alert: AurigraphHighCPUUsage\n      expr: |\n        (\n          rate(container_cpu_usage_seconds_total{container=\"aurigraph-v11-production\"}[5m]) > 7.0\n        )\n      for: 10m\n      labels:\n        severity: warning\n        service: aurigraph-v11\n        component: infrastructure\n        tier: production\n        priority: p2\n      annotations:\n        summary: \"Aurigraph V11 high CPU usage\"\n        description: |\n          CPU usage is {{ printf \"%.1f\" $value }} cores on {{ $labels.pod }}.\n          This is approaching the limit of 8 cores and may impact performance.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/high-cpu-usage\"\n    \n    - alert: AurigraphDiskSpaceLow\n      expr: |\n        (\n          (\n            node_filesystem_avail_bytes{mountpoint=~\"/app/data|/var/lib/docker\"} / \n            node_filesystem_size_bytes{mountpoint=~\"/app/data|/var/lib/docker\"}\n          ) < 0.15\n        )\n      for: 5m\n      labels:\n        severity: warning\n        service: aurigraph-v11\n        component: infrastructure\n        tier: production\n        priority: p2\n      annotations:\n        summary: \"Aurigraph V11 low disk space\"\n        description: |\n          Available disk space is {{ printf \"%.1f\" ($value * 100) }}% on {{ $labels.instance }} {{ $labels.mountpoint }}.\n          Consider cleaning up or expanding storage.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/low-disk-space\"\n    \n    - alert: AurigraphPodCrashLooping\n      expr: |\n        (\n          increase(kube_pod_container_status_restarts_total{container=\"aurigraph-v11-production\"}[15m]) > 2\n        )\n      for: 5m\n      labels:\n        severity: critical\n        service: aurigraph-v11\n        component: infrastructure\n        tier: production\n        priority: p1\n      annotations:\n        summary: \"Aurigraph V11 pod crash looping\"\n        description: |\n          Pod {{ $labels.pod }} has restarted {{ $value }} times in 15 minutes.\n          This indicates a serious application or infrastructure issue.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/pod-crash-loop\"\n        escalation_policy: \"immediate\"\n    \n    - alert: AurigraphPodNotReady\n      expr: |\n        (\n          kube_pod_status_ready{condition=\"false\", pod=~\"aurigraph-v11-production-.*\"} == 1\n        )\n      for: 10m\n      labels:\n        severity: warning\n        service: aurigraph-v11\n        component: infrastructure\n        tier: production\n        priority: p2\n      annotations:\n        summary: \"Aurigraph V11 pod not ready\"\n        description: |\n          Pod {{ $labels.pod }} has been not ready for 10 minutes.\n          This may indicate startup issues or failing health checks.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/pod-not-ready\"\n    \n    - alert: AurigraphNetworkLatencyHigh\n      expr: |\n        (\n          histogram_quantile(0.95, rate(aurigraph_network_latency_seconds_bucket[5m])) > 0.05\n        )\n      for: 5m\n      labels:\n        severity: warning\n        service: aurigraph-v11\n        component: network\n        tier: production\n        priority: p2\n      annotations:\n        summary: \"Aurigraph V11 high network latency\"\n        description: |\n          P95 network latency is {{ printf \"%.3f\" $value }}s on {{ $labels.pod }}.\n          This may impact consensus and inter-node communication.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/high-network-latency\"\n  \n  # ==========================================================================\n  # Service Level Objective (SLO) Alerts\n  # ==========================================================================\n  \n  - name: aurigraph-v11-slo\n    interval: 60s\n    rules:\n    \n    - alert: AurigraphSLOErrorRateHigh\n      expr: |\n        (\n          (\n            rate(http_server_requests_seconds_count{status=~\"5.*\"}[10m]) /\n            rate(http_server_requests_seconds_count[10m])\n          ) > 0.01\n        )\n      for: 10m\n      labels:\n        severity: warning\n        service: aurigraph-v11\n        component: api\n        tier: production\n        priority: p2\n        alert_type: slo_violation\n      annotations:\n        summary: \"Aurigraph V11 SLO error rate violation\"\n        description: |\n          HTTP error rate is {{ printf \"%.2f\" ($value * 100) }}% over 10 minutes on {{ $labels.pod }}.\n          SLO target: < 1% error rate.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/slo-error-rate\"\n    \n    - alert: AurigraphSLOAvailabilityLow\n      expr: |\n        (\n          (\n            avg_over_time(up{job=\"aurigraph-v11-production\"}[1h]) < 0.999\n          )\n        )\n      for: 0m\n      labels:\n        severity: critical\n        service: aurigraph-v11\n        component: availability\n        tier: production\n        priority: p1\n        alert_type: slo_violation\n      annotations:\n        summary: \"Aurigraph V11 SLO availability violation\"\n        description: |\n          Service availability is {{ printf \"%.3f\" ($value * 100) }}% over 1 hour.\n          SLO target: > 99.9% availability.\n        runbook_url: \"https://docs.aurigraph.io/runbooks/slo-availability\"\n        escalation_policy: \"slo-violation\"\n"