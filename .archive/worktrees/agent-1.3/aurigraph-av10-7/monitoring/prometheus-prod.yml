global:
  scrape_interval: 5s
  evaluation_interval: 15s
  external_labels:
    environment: 'production-dev4'
    cluster: 'aurigraph-av10-7'

rule_files:
  - "alerts-prod.yml"

alerting:
  alertmanagers:
    - static_configs:
        - targets:
          - alertmanager:9093

scrape_configs:
  # Aurigraph Validator Nodes
  - job_name: 'aurigraph-validators'
    metrics_path: '/metrics'
    static_configs:
      - targets: 
          - 'validator-1:8180'
          - 'validator-2:8181' 
          - 'validator-3:8182'
    scrape_interval: 3s
    labels:
      service: 'validator'
      platform: 'aurigraph-av10'

  # Aurigraph Full Nodes
  - job_name: 'aurigraph-nodes'
    metrics_path: '/metrics'
    static_configs:
      - targets:
          - 'node-1:8200'
          - 'node-2:8201'
          - 'node-3:8202'
          - 'node-4:8203'
          - 'node-5:8204'
    scrape_interval: 5s
    labels:
      service: 'node'
      platform: 'aurigraph-av10'

  # Management API
  - job_name: 'aurigraph-management'
    metrics_path: '/metrics'
    static_configs:
      - targets:
          - 'management-1:3240'
          - 'management-2:3241'
    scrape_interval: 10s
    labels:
      service: 'management'
      platform: 'aurigraph-av10'

  # System Metrics (Node Exporter)
  - job_name: 'node-exporter'
    static_configs:
      - targets:
          - 'localhost:9100'
    scrape_interval: 15s
    labels:
      service: 'system'

  # Docker Container Metrics
  - job_name: 'cadvisor'
    static_configs:
      - targets:
          - 'localhost:8080'
    scrape_interval: 10s
    labels:
      service: 'containers'

  # Prometheus Self-Monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets:
          - 'localhost:9090'
    scrape_interval: 15s

  # Custom Application Metrics
  - job_name: 'aurigraph-custom-metrics'
    metrics_path: '/api/prometheus/metrics'
    static_configs:
      - targets:
          - 'management-1:3240'
    scrape_interval: 5s
    labels:
      service: 'custom'

  # Network Performance Metrics
  - job_name: 'aurigraph-network'
    metrics_path: '/api/network/metrics'
    static_configs:
      - targets:
          - 'validator-1:8180'
          - 'node-1:8200'
    scrape_interval: 10s
    labels:
      service: 'network'

  # Quantum Cryptography Metrics
  - job_name: 'aurigraph-quantum'
    metrics_path: '/api/quantum/metrics'
    static_configs:
      - targets:
          - 'validator-1:8180'
          - 'validator-2:8181'
          - 'validator-3:8182'
    scrape_interval: 5s
    labels:
      service: 'quantum'

# Storage configuration for production
storage:
  tsdb:
    path: /prometheus
    retention.time: 90d
    retention.size: 100GB
    compaction.block_range: 2h
    
# Remote write configuration (optional)
# remote_write:
#   - url: "https://remote-prometheus.example.com/api/v1/receive"
#     basic_auth:
#       username: "aurigraph"
#       password: "secure_password"