FROM node:20-alpine

WORKDIR /app

# Copy package files
COPY package*.json ./
COPY tsconfig.json ./

# Install all dependencies including dev dependencies for ts-node
RUN npm install

# Copy source code
COPY src/ ./src/
COPY start-management-dashboard.ts ./

# Install global dependencies
RUN npm install -g typescript ts-node

EXPOSE 3040

CMD ["npx", "ts-node", "start-management-dashboard.ts"]