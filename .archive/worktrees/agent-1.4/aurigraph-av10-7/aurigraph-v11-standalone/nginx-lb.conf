events {
    worker_connections 1024;
}

http {
    upstream aurigraph_backend {
        server aurigraph-v10:8080;
        server aurigraph-v11:80 backup;
    }

    server {
        listen 80;
        
        location /v10/ {
            proxy_pass http://aurigraph-v10:8080/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
        }
        
        location /v11/ {
            proxy_pass http://aurigraph-v11-demo:80/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
        }
        
        location / {
            return 200 '
<!DOCTYPE html>
<html>
<head><title>Aurigraph Platform</title></head>
<body style="font-family: Arial; background: #1e3c72; color: white; padding: 40px; text-align: center;">
    <h1>ðŸš€ Aurigraph Platform</h1>
    <div style="margin: 30px 0;">
        <h2>Available Services:</h2>
        <div style="margin: 20px;">
            <a href="/v10/" style="display: inline-block; padding: 15px 30px; background: #4CAF50; color: white; text-decoration: none; border-radius: 5px; margin: 10px;">
                ðŸ“Š V10 Platform (Active)
            </a>
        </div>
        <div style="margin: 20px;">
            <a href="/v11/" style="display: inline-block; padding: 15px 30px; background: #FF9800; color: white; text-decoration: none; border-radius: 5px; margin: 10px;">
                ðŸš€ V11 Platform (Demo)
            </a>
        </div>
    </div>
    <div style="margin: 30px 0; font-size: 0.9em; opacity: 0.8;">
        <p><strong>Direct Access:</strong></p>
        <p>V10: <a href="http://localhost:8080" style="color: #FFD700;">http://localhost:8080</a></p>
        <p>V11: <a href="http://localhost:9003" style="color: #FFD700;">http://localhost:9003</a></p>
        <p>Monitoring: <a href="http://localhost:3000" style="color: #FFD700;">http://localhost:3000</a></p>
    </div>
</body>
</html>';
            add_header Content-Type text/html;
        }
    }
}