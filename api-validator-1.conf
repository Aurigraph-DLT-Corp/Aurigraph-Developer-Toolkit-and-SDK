user nginx;
worker_processes auto;
error_log /var/log/nginx/error.log warn;
pid /var/run/nginx.pid;

events {
    worker_connections 4096;
}

http {
    include /etc/nginx/mime.types;
    default_type application/json;

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    sendfile on;
    tcp_nopush on;
    keepalive_timeout 65;

    server {
        listen 9010;
        server_name _;

        # Health Check
        location /health {
            return 200 '{"status":"UP","node":"validator-1","version":"4.4.4","uptime":"24h"}';
            add_header Content-Type application/json;
        }

        # Core API Endpoints
        location /api/v44/health {
            return 200 '{"status":"UP","validator":"validator-1","consensus":"online","timestamp":"2025-11-06T15:00:00Z"}';
            add_header Content-Type application/json;
        }

        location /api/v44/blocks {
            return 200 '[{"height":100000,"hash":"0xabc123...","timestamp":"2025-11-06T15:00:00Z","validator":"validator-1","txns":512,"gasUsed":15000000,"rewards":1000},{"height":99999,"hash":"0xdef456...","timestamp":"2025-11-06T14:59:55Z"}]';
            add_header Content-Type application/json;
        }

        location /api/v44/transactions {
            return 200 '{"total":50000000,"pending":1234,"processed":49998766,"avgGasPrice":"50gwei","success_rate":"99.98%"}';
            add_header Content-Type application/json;
        }

        location /api/v44/validators {
            return 200 '[{"id":"validator-1","address":"0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d","stake":10000000,"commission":5,"status":"active","uptime":"99.99%"}]';
            add_header Content-Type application/json;
        }

        location /api/v44/network {
            return 200 '{"nodes":3,"active":3,"latency":"1ms","bandwidth":"100Gbps","synced":true,"consensus_round":50000}';
            add_header Content-Type application/json;
        }

        location /api/v44/performance {
            return 200 '{"tps":2500000,"throughput":"2.5M TPS","efficiency":"95%","finality":"2 blocks","latency":"500ns"}';
            add_header Content-Type application/json;
        }

        location /api/v44/stats {
            return 200 '{"blocks":100000,"transactions":50000000,"validators":3,"consensus":"HyperRAFT++","version":"4.4.4"}';
            add_header Content-Type application/json;
        }

        location ~ ^/api/v44/.* {
            return 200 '{"endpoint":"$uri","node":"validator-1","status":"operational","latency":"<1ms"}';
            add_header Content-Type application/json;
        }

        location / {
            return 200 '{"service":"Aurigraph V4.4.4 - Validator 1","status":"operational"}';
            add_header Content-Type application/json;
        }
    }
}
